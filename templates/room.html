{% extends "base.html" %}
{% block content %}
<nav class="room-nav">
    <p>Room code: {{room}}</p>
    <div class="guess-parent">
        <div class="guess">
            <small>GUESS THIS</small>
            <p class="secret-word">secret</p>
        </div>
    </div>
</nav>
<main class="main-body">
    <div class="player-list">
        <ul>
            <li>Tom</li>
        </ul>
    </div>
    <div class="board-area">
    </div>
    <div class="msg-area">
        <div class="msg-display" id="msg-display"></div>
        <div class="msg-box">
            <input type="text" placeholder="Guess!" name="guess" id="usr-input">
            <button type="submit" id="submit-btn" hidden>
        </div>
    </div>
</main>
<script>
    var socket = io();
    function createMessage(usr, msg) {
        var msgBox = document.getElementById("msg-display");
        var msgBlock = document.createElement("div");
        msgBlock.classList.add("msg-block");
        var msgSpan = document.createElement("span");
        var userBold = document.createElement("STRONG");
        var usrText = document.createTextNode(`${usr}: `);
        userBold.appendChild(usrText);
        msgSpan.appendChild(userBold);  
        msgText = document.createTextNode(`${msg}`);
        msgSpan.appendChild(msgText);
        msgBlock.appendChild(msgSpan);
        msgBox.appendChild(msgBlock);
    }
    var submitBtn = document.getElementById("submit-btn");
    var usrInput = document.getElementById("usr-input");
    usrInput.addEventListener("keyup", (event) => {
        event.preventDefault();
        if (event.keyCode === 13) {
            socket.emit("message", {"msg": usrInput.value});
            usrInput.value = "";
        }
    });
    socket.on("message", (data) => {
        createMessage(data.usr, data.msg);
    });
</script>
{% endblock %}